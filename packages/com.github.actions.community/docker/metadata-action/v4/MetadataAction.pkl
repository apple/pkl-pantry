//===----------------------------------------------------------------------===//
// Copyright Â© 2025 Apple Inc. and the Pkl project authors. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//===----------------------------------------------------------------------===//
/// GitHub Action to extract metadata (tags, labels) for Docker
module com.github.actions.community.docker.`metadata-action`.v4.MetadataAction

extends "@com.github.actions/AbstractTypedStep.pkl"

fixed action: "docker/metadata-action"

fixed version: "v4"

with: With

class With {
  /// Where to get context data. Allowed options are "workflow"  (default), "git".
  ///
  /// Default if unspecified: `"workflow"`
  context: ("workflow" | "git")?

  /// List of Docker images to use as base name for tags
  hidden imagesList: Listing<String>

  /// List of Docker images to use as base name for tags
  ///
  /// To set as a [Listing], use [imagesList].
  images: String = imagesList.join("\n")

  /// List of tags as key-value pair attributes
  hidden tagsList: Listing<String>?

  /// List of tags as key-value pair attributes
  ///
  /// To set as a [Listing], use [tagsList].
  tags: String? = tagsList?.join("\n")

  /// Flavors to apply
  hidden flavorList: Listing<String>?

  /// Flavors to apply
  ///
  /// To set as a [Listing], use [flavorList].
  flavor: String? = flavorList?.join("\n")

  /// List of custom labels
  hidden labelsList: Listing<String>?

  /// List of custom labels
  ///
  /// To set as a [Listing], use [labelsList].
  labels: String? = labelsList?.join("\n")

  /// Separator to use for tags output (default \n)
  `sep-tags`: String?

  /// Separator to use for labels output (default \n)
  `sep-labels`: String?

  /// Bake target name (default docker-metadata-action)
  `bake-target`: String?

  /// GitHub Token as provided by secrets
  ///
  /// Default if unspecified: `"${{ github.token }}"`
  `github-token`: String?
}
