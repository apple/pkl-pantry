//===----------------------------------------------------------------------===//
// Copyright Â© 2025 Apple Inc. and the Pkl project authors. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//===----------------------------------------------------------------------===//
/// GitHub Action that uploads coverage reports for your repository to codecov.io
module com.github.actions.community.codecov.`codecov-action`.v3.CodecovAction

extends "@com.github.actions/AbstractTypedStep.pkl"

fixed action: "codecov/codecov-action"

fixed version: "v3"

with: With

class With {
  /// Repository upload token - get it from codecov.io. Required only for private repositories
  token: String?

  /// Path to coverage file to upload
  file: String?

  /// Comma-separated list of files to upload
  hidden filesList: Listing<String>?

  /// Comma-separated list of files to upload
  ///
  /// To set as a [Listing], use [filesList].
  files: String? = filesList?.join(",")

  /// Directory to search for coverage reports.
  directory: String?

  /// Flag upload to group coverage metrics (e.g. unittests | integration | ui,chrome)
  hidden flagsList: Listing<String>?

  /// Flag upload to group coverage metrics (e.g. unittests | integration | ui,chrome)
  ///
  /// To set as a [Listing], use [flagsList].
  flags: String? = flagsList?.join(",")

  /// Specify the path of a full Codecov report to re-upload
  full_report: String?

  /// The commit SHA of the parent for which you are uploading coverage. If not present, the parent will be determined using the API of your repository provider.  When using the repository providers API, the parent is determined via finding the closest ancestor to the commit.
  commit_parent: String?

  /// Don't upload files to Codecov
  dry_run: Boolean?

  /// Environment variables to tag the upload with (e.g. PYTHON | OS,PYTHON)
  hidden env_vars_list: Listing<String>?

  /// Environment variables to tag the upload with (e.g. PYTHON | OS,PYTHON)
  ///
  /// To set as a [Listing], use [env_vars_list].
  env_vars: String? = env_vars_list?.join(",")

  /// Specify whether or not CI build should fail if Codecov runs into an error during upload
  fail_ci_if_error: Boolean?

  /// Comma-separated list, see the README for options and their usage. Options include `network`, `fixes`, `search`.
  hidden functionalitiesList: Listing<String>?

  /// Comma-separated list, see the README for options and their usage. Options include `network`, `fixes`, `search`.
  ///
  /// To set as a [Listing], use [functionalitiesList].
  functionalities: String? = functionalitiesList?.join(",")

  /// Run with gcov support
  gcov: Boolean?

  /// Extra arguments to pass to gcov
  hidden gcov_args_list: Listing<String>?

  /// Extra arguments to pass to gcov
  ///
  /// To set as a [Listing], use [gcov_args_list].
  gcov_args: String? = gcov_args_list?.join(" ")

  /// gcov executable to run. Defaults to gcov
  gcov_executable: String?

  /// Paths to ignore during gcov gathering
  hidden gcov_ignore_list: Listing<String>?

  /// Paths to ignore during gcov gathering
  ///
  /// To set as a [Listing], use [gcov_ignore_list].
  gcov_ignore: String? = gcov_ignore_list?.join("\n")

  /// Paths to include during gcov gathering
  hidden gcov_include_list: Listing<String>?

  /// Paths to include during gcov gathering
  ///
  /// To set as a [Listing], use [gcov_include_list].
  gcov_include: String? = gcov_include_list?.join("\n")

  /// Move discovered coverage reports to the trash
  move_coverage_to_trash: Boolean?

  /// User defined upload name. Visible in Codecov UI
  name: String?

  /// Specify a filter on the files listed in the network section of the Codecov report. Useful for upload-specific path fixing
  network_filter: String?

  /// Specify a prefix on files listed in the network section of the Codecov report. Useful to help resolve path fixing
  network_prefix: String?

  /// Override the assumed OS. Options are aarch64 | alpine | linux | macos | windows.
  os: ("aarch64" | "alpine" | "linux" | "macos" | "windows")?

  /// Specify the branch name
  override_branch: String?

  /// Specify the build number
  override_build: Int?

  /// Specify the commit SHA
  override_commit: String?

  /// Specify the pull request number
  override_pr: Int?

  /// Specify the git tag
  override_tag: String?

  /// Used when not in git/hg project to identify project root directory
  root_dir: String?

  /// Specify the slug manually (Enterprise use)
  slug: String?

  /// Run with swift coverage support
  swift: Boolean?

  /// Specify the swift project to speed up coverage conversion
  swift_project: String?

  /// The upstream http proxy server to connect through
  upstream_proxy: String?

  /// Change the upload host (Enterprise use)
  url: String?

  /// Specify whether the Codecov output should be verbose
  verbose: Boolean?

  /// Specify which version of the Codecov Uploader should be used. Defaults to `latest`
  version: String?

  /// Directory in which to execute codecov.sh
  `working-directory`: String?

  /// Run with xcode support
  xcode: Boolean?

  /// Specify the xcode archive path. Likely specified as the -resultBundlePath and should end in .xcresult
  xcode_archive_path: String?

  /// Add additional uploader args that may be missing in the Action
  hidden xtra_args_list: Listing<String>?

  /// Add additional uploader args that may be missing in the Action
  ///
  /// To set as a [Listing], use [xtra_args_list].
  xtra_args: String? = xtra_args_list?.join(" ")
}
