//===----------------------------------------------------------------------===//
// Copyright Â© 2025 Apple Inc. and the Pkl project authors. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//===----------------------------------------------------------------------===//
/// GitHub Action that uploads coverage reports for your repository to codecov.io
module com.github.actions.community.codecov.`codecov-action`.v4.CodecovAction

extends "@com.github.actions/AbstractTypedStep.pkl"

fixed action: "codecov/codecov-action"

fixed version: "v4"

with: With

class With {
  /// Repository Codecov token. Used to authorize report uploads
  token: String?

  /// Specify the path to the Codecov YML
  codecov_yml_path: String?

  /// Override to specify the parent commit SHA
  commit_parent: String?

  /// Directory to search for coverage reports.
  directory: String?

  /// Disable file fixes to ignore common lines from coverage (e.g. blank lines or empty brackets)
  disable_file_fixes: Boolean?

  /// Disable search for coverage files. This is helpful when specifying what files you want to upload with the --file option.
  disable_search: Boolean?

  /// Disable setting safe directory. Set to true to disable.
  disable_safe_directory: Boolean?

  /// Don't upload files to Codecov
  dry_run: Boolean?

  /// Environment variables to tag the upload with (e.g. PYTHON | OS,PYTHON)
  hidden env_vars_list: Listing<String>?

  /// Environment variables to tag the upload with (e.g. PYTHON | OS,PYTHON)
  ///
  /// To set as a [Listing], use [env_vars_list].
  env_vars: String? = env_vars_list?.join(",")

  /// Folders to exclude from search
  hidden excludeList: Listing<String>?

  /// Folders to exclude from search
  ///
  /// To set as a [Listing], use [excludeList].
  exclude: String? = excludeList?.join(",")

  /// Specify whether or not CI build should fail if Codecov runs into an error during upload
  fail_ci_if_error: Boolean?

  /// Path to coverage file to upload
  file: String?

  /// Comma-separated list of files to upload
  hidden filesList: Listing<String>?

  /// Comma-separated list of files to upload
  ///
  /// To set as a [Listing], use [filesList].
  files: String? = filesList?.join(",")

  /// Flag upload to group coverage metrics (e.g. unittests | integration | ui,chrome)
  hidden flagsList: Listing<String>?

  /// Flag upload to group coverage metrics (e.g. unittests | integration | ui,chrome)
  ///
  /// To set as a [Listing], use [flagsList].
  flags: String? = flagsList?.join(",")

  /// Override the git_service (e.g. github_enterprise)
  git_service: String?

  /// Raise no exceptions when no coverage reports found
  handle_no_reports_found: Boolean?

  /// The job code
  job_code: String?

  /// User defined upload name. Visible in Codecov UI
  name: String?

  /// Specify a filter on the files listed in the network section of the Codecov report. This will only add files whose path begin with the specified filter. Useful for upload-specific path fixing
  network_filter: String?

  /// Specify a prefix on files listed in the network section of the Codecov report. Useful to help resolve path fixing
  network_prefix: String?

  /// Override the assumed OS. Options are linux | macos | windows.
  os: ("linux" | "macos" | "windows")?

  /// Specify the branch name
  override_branch: String?

  /// Specify the build number
  override_build: String?

  /// The URL of the build where this is running
  override_build_url: String?

  /// Specify the commit SHA
  override_commit: String?

  /// Specify the pull request number
  override_pr: Int?

  /// plugins to run. Options: xcode, gcov, pycoverage. The default behavior runs them all.
  hidden pluginList: Listing<"xcode" | "gcov" | "pycoverage">?

  /// plugins to run. Options: xcode, gcov, pycoverage. The default behavior runs them all.
  ///
  /// To set as a [Listing], use [pluginList].
  plugin: String? = pluginList?.join(",")

  /// Comma-separated list of plugins for use during upload.
  hidden pluginsList: Listing<"xcode" | "gcov" | "pycoverage">?

  /// Comma-separated list of plugins for use during upload.
  ///
  /// To set as a [Listing], use [pluginsList].
  plugins: String? = pluginsList?.join(",")

  /// The code of the report. If unsure, do not include
  report_code: String?

  /// Used when not in git/hg project to identify project root directory
  root_dir: String?

  /// Specify the slug manually (Enterprise use)
  slug: String?

  /// Specify the base url to upload (Enterprise use)
  url: String?

  /// Use the legacy upload endpoint
  use_legacy_upload_endpoint: Boolean?

  /// Use OIDC instead of token. This will ignore any token supplied
  use_oidc: Boolean?

  /// Specify whether the Codecov output should be verbose
  verbose: Boolean?

  /// Specify which version of the Codecov CLI should be used. Defaults to `latest`
  version: String?

  /// Directory in which to execute codecov.sh
  `working-directory`: String?
}
