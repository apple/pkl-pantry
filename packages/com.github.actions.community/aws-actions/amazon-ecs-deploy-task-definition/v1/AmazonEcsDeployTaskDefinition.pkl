//===----------------------------------------------------------------------===//
// Copyright Â© 2025 Apple Inc. and the Pkl project authors. All rights reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//===----------------------------------------------------------------------===//
/// Registers an Amazon ECS task definition, and deploys it to an ECS service
module com.github.actions.community.`aws-actions`.`amazon-ecs-deploy-task-definition`.v1.AmazonEcsDeployTaskDefinition

extends "@com.github.actions/AbstractTypedStep.pkl"

fixed action: "aws-actions/amazon-ecs-deploy-task-definition"

fixed version: "v1"

with: With

class With {
  /// The path to the ECS task definition file to register
  `task-definition`: String

  /// The number of instantiations of the task to place and keep running in your service.
  `desired-count`: Int?

  /// The name of the ECS service to deploy to. The action will only register the task definition if no service is given.
  service: String?

  /// The name of the ECS service's cluster.  Will default to the 'default' cluster
  cluster: String?

  /// Whether to wait for the ECS service to reach stable state after deploying the new task definition. Valid value is "true". Will default to not waiting.
  `wait-for-service-stability`: Boolean?

  /// How long to wait for the ECS service to reach stable state, in minutes (default: 30 minutes, max: 6 hours). For CodeDeploy deployments, any wait time configured in the CodeDeploy deployment group will be added to this value.
  `wait-for-minutes`: Int?

  /// The path to the AWS CodeDeploy AppSpec file, if the ECS service uses the CODE_DEPLOY deployment controller. Will default to 'appspec.yaml'.
  `codedeploy-appspec`: String?

  /// The name of the AWS CodeDeploy application, if the ECS service uses the CODE_DEPLOY deployment controller. Will default to 'AppECS-{cluster}-{service}'.
  `codedeploy-application`: String?

  /// The name of the AWS CodeDeploy deployment group, if the ECS service uses the CODE_DEPLOY deployment controller. Will default to 'DgpECS-{cluster}-{service}'.
  `codedeploy-deployment-group`: String?

  /// A description of the deployment, if the ECS service uses the CODE_DEPLOY deployment controller.
  `codedeploy-deployment-description`: String?

  /// Whether to force a new deployment of the service. Valid value is "true". Will default to not force a new deployment.
  `force-new-deployment`: Boolean?
}
